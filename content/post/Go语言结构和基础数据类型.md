---
title: "Go语言结构和基础数据类型"
date: 2018-11-18T15:07:20+08:00
categories:
- 服务端开发
- go语言
tags:
- go
keywords:
- go基础数据类型
- go语言结构
#thumbnailImage: //example.com/image.jpg
---

<!--more-->
# 前言
前面我们讲了go环境的搭建和一个简单的go web项目例子，让大家对go语言的开发有一个简单入门。任何语言的学习都是由浅入深的，从基础到高级，那么什么是浅，什么是深呢？根据我的理解，浅就是基础的，靠多记多练就能轻松掌握的东西；深则是需要在熟知浅的基础上，需要一定的理解和一定的实践才能慢慢明白，我认为是需要悟的，通俗的讲就是开窍了就懂了。从今天开始，我将带大家对go语言的进行深入浅出的学习。今天我们来讲讲go语言结构和go基础数据类型有哪些。
## go语言结构
### 程序实际上是各种逻辑的组合结果，它是由不同的结构组成的。我们来看一下一个简单的Go语言的基本结构：

	package main //1.包结构
	
	import "fmt"  //2.1包依赖，系统内置包，直接使用短命名。
	import _ "io" //2.2，依赖并不直接使用，但是会执行io包的初始化
	import ioAlis "io" //2.3，依赖并创建别名，解决包名冲突问题
	import "github.com/Shopify/sarama" //2.4，相对gopath目录引入依赖
	import "../sarama" //2.5，相对项目根目录的依赖（不建议）
	
	var AppleCount int = 5 //3.1变量申明，大写开头，包外可见
	var orangeCount = 6    //3.2，不写类型，编译时直接推导出类型；小写开头，包外不可见
	
	const High int = 0 //4.1常量申明，大写开头，包外可见
	const LOW int = 1  //4.2，小写开头，包外不可见
	
	func Max(a int, b int) int { // 函数申明5.1，大写开头，公有函数，对外提供调用
		if a > b {
			return a
		} else {
			return b
		}
	}
	
	func main() { //main函数申明
		appleWeight := 1 //3.3变量申明,可以不用写 var,编译时直接推导出类型
	
		fmt.Println("Hello, World!", appleWeight) //6.表达式
	}

1. 包结构：包是go语言程序的基本组成单位，包名通常和该文件所在的目录名一样（main包除外），包名通常为小写。包目录下可以有多个go文件，它们只能属于同一个包中。一个可执行的go程序必须包含一个声明为main包的go文件和一个main函数。
2. 包依赖：上面说了包是基本组织单位，所以go里面的引入依赖也只能依赖于包，包依赖有多个规则：
	- 包依赖可以是相对项目本身的目录，也可以是相对gopath的目录，建议引入时相对gopath目录。
	- 包依赖可以使用别名代替原包名。
	- 包依赖可以使用_引入没有显性使用的包。
3. 变量申明：变量申明后必须使用，否则变量名用_表示，变量申明可以不用指明类型，编译器会推导出正确的类型。变量申明可以在两个地方，一种是函数外，一种是函数内，他们的区别是函数内的变量申名可以使用 := 简写形式进行申明，函数内的变量无论大小写，对外都不可见。变量命名必须符合标识符的规定。
4. 常量申明：常量申明后必须使用，否则常量名用_表示，常量申明可以不用指明类型，编译器会推导出正确的类型。常量申明可以在两个地方，一种是函数外，一种是函数内，他们的区别是函数内的常量无论大小写，对外都不可见。常量命名必须符合标识符的规定。
5. 函数申明：函数可以有多参数和多返回值，函数细节具体后面讲到函数时再深入。函数命名必须符合标识符的规定。
6. go语言的标识符规定（变量，函数或者结构体命名）
	- 文件名小写，可以通过下划线_分隔
	- 标识符区分大小写，UTF-8编码，首字符可以用_，不可以用数字，不可以用go关键字，不可以用运算符
	
## 基础数据类型
### 在我知道的语言中，大多数语言的基础数据类型大同小异，go语言的基础数据类型有几种：
- 布尔类型
- 数值类型
- 字符串类型（后面跟数组和切片一起讲）

### 布尔类型（bool）：
go里面的布尔类型用关键字bool表示，变量的值只能是常量true或者false。
    
	var ok bool = ture
	ok := false//ok也是bool类型
bool类型变量的常用用法：

	if ok:=func(); ok {
	/// do ok
	}
bool类型变量也通常作为函数的返回值来表示函数是否执行成功：

	func doSomething() bool {
		if func() {
			return true
		} else {
			return false
		}
	}
### 数值类型
go里面的数值类型大体上分为几类：整形，浮点型和复数等。go里面的整形分为有符号的和无符号的，有符号和无符号的区别是表示的范围不一样，用途也不一样(具体用途暂时还没深入)。其中还有一些内置的别名，rune（int32等价，它用来表示字符串中一个unicode字符），byte(uint8等价)。下面为大家详细讲解一下，有符号的整形，浮点型复数类型。

1.有符号的整形：不像Java语言，不同的位数的整形用不同的命名（byte,short,int,long...），go里面的大部分整形类型的都是用int作为前缀，后面直接带位数来进行区分：int8,int16,int32,int64,int。注意：int类型是一般情况下，根据操作系统来决定具体位数的，32位的操作系统int表示int32，64位的操作系统int表示int64。虽然这些名称看起来很相似，但是其实他们都是不同的类型，在go里面不同的类型是不能直接转换的，需要加类型转换标识，下面给一些例子。

    var v1 int8 = 1000
    fmt.Println(v1) //1000超过int8的表示范围，运行时会报：constant 1000 overflows int8
    
    var v2 int8 = 100
    var v3 int16 = int16(v2) //不管是少位数int类型转多位数还是多位数int类型转少位数都需要显示s声明转换，否则编译不通过
    fmt.Println(v3)
    
    v4 := 1000
    var v5 int8 = int8(v4) //不管是少位数int类型转多位数还是多位数int类型转少位数都需要显示声明转换，否则编译不通过
    fmt.Println(v5)
    fmt.Println(reflect.TypeOf(v4)) 
    //v4没有显示声明类型，编译器会默认推导出 int 类型，如果v4的值超过了int 表示的最大范围，则运行时会报错：constant 100000000000000000000 overflows int
    
    var v6 int32 = 26
    var v7 int = int(v6) // int类型和int32类型在go语言里实际上不是同一个类型，所以不能直接转换，通常情况下，我们使用整形直接声明为int>类型
    fmt.Println(v7)
2.浮点型：浮点型有两种类型float32和float64。默认不声明的情况下，编译器会推导出浮点值为float64类型。

	var v8 float32 = 100.4
	var v9 float64 = float64(v8) //跟整形类型一样，float32和float64也是不同的类型，需要显性转换。
	fmt.Println(v9)

	v10 := 10000000000000.5
	fmt.Println(v10)//当v10的值足够大时，打印出来并不会报错，输出的形式是复数表示。
	fmt.Println(reflect.TypeOf(v10))//当浮点类型的变量没有显性声明时，编译器会默认推导v10为float64类型。
3.复数：复数有两种类型 complex64,complex128。默认不声明的情况下，编译器会推导出复数值为complex128类型。
	
	var v11 complex64 = 111
	fmt.Println(v11)//打印出来的结果为：(111+0i)
	
	var v12 complex128 = complex128(v11)//显性的声明类型变量转换
	fmt.Println(v12)//打印出来的结果为：(111+0i)

	v13 := (111+0i)
	fmt.Println(reflect.TypeOf(v13))//编译器会默认推导复数的类型为complex128

## 总结：
go语言既有强类型语言的严谨，也有动态类型语言的灵活（类型推导）。go语言通过定一些强制性的约束让编写出来的代码简单，可读性好，没有歧义，并且功能强大。丰富的基础数据类型可以让我们实现各种各样的需求，包括上层（应用层）的和底层（操作系统层）的需求。本章为大家讲解了go语言的基本结构，可以对go程序各个部分有个全面的认识，再复杂的程序也是由基本的组成的，所以了解了基本结构之后，可以研究更深入的代码了。同时，基本数据类型是任何程序语言的基础，阅读本章了解了之后可以顺利的开展go语言之旅了。当然，程序语言的组成肯定不仅仅是基础数据类型，还有各种复杂数据结构。后面为大家讲解go里面的字符串，数组，slice(切片)，map，指针，结构体等数据类型。
